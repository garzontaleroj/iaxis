package axis.service.modal;import java.math.BigDecimal;import java.util.ArrayList;import java.util.Map;import javax.servlet.http.HttpServletRequest;import org.apache.commons.logging.Log;import org.apache.commons.logging.LogFactory;import axis.jdbc.PAC_IAX_CASHDESK;import axis.jdbc.PAC_IAX_GESTION_PROCESOS;import axis.mvc.control.modal.Axiscaj020Action;import axis.service.axis.AxisBaseService;import axis.util.Constantes;public class Axiscaj020Service extends AxisBaseService {	Log logger = LogFactory.getLog(this.getClass());	public void m_form(HttpServletRequest request, Axiscaj020Action thisAction) {		logger.debug("Axiscaj020Service m_form");		Map formdata = (Map) request.getAttribute(Constantes.FORMDATA);		try {			BigDecimal NSEQCAJA = this.getCampoNumerico(request, "NSEQCAJAO");			BigDecimal NNUMLIN = this.getCampoNumerico(request, "NNUMLINO");			PAC_IAX_CASHDESK pac_iax_cashdesk = new PAC_IAX_CASHDESK(					(java.sql.Connection) request.getAttribute(Constantes.DB01CONN));			Map map = pac_iax_cashdesk.ejecutaPAC_IAX_CASHDESK__F_GET_DATOSPAGO(NSEQCAJA, NNUMLIN);			ArrayList valores = (ArrayList) this.tratarRETURNyMENSAJES(request, map, false);			if (!isEmpty(valores)) {				formdata.putAll((Map) valores.get(0));				if (!isEmpty(formdata.get("CAUTORIZA")) && !isEmpty(formdata.get("CCOMERCIO"))						&& !isEmpty(formdata.get("CPROCESO"))) {					PAC_IAX_GESTION_PROCESOS pac_axis_gestprocesos = new PAC_IAX_GESTION_PROCESOS(							(java.sql.Connection) request.getAttribute(Constantes.DB01CONN));					Map sor = pac_axis_gestprocesos.ejecutaPAC_IAX_GESTION_PROCESOS__F_GET_TABLA_INTERMEDIA(							(BigDecimal) formdata.get("CAUTORIZA"), (BigDecimal) formdata.get("CPROCESO"),							(BigDecimal) formdata.get("CCOMERCIO"));					tratarRETURNyMENSAJES(request, sor);					formdata.put("OBTABLA", sor.get("POBTABLAPROCESO"));				}			}		} catch (Exception e) {			logger.error("Error en el servicio Axiscaj020Service - metodo m_form", e);			thisAction.guardarMensaje(request, "1000050", new Object[] { e.toString() }, Constantes.MENSAJE_ERROR);		} finally {			this.f_Cargar_Propiedades_Pantalla(request, whoami(this));		}	}}